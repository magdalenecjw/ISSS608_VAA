[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html",
    "href": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html",
    "title": "Hands-on Exercise 1",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if tidyverse packages have been installed on the computer. If they are, the packages will be launched.\n\npacman::p_load(tidyverse)\n\n\n\n\n\nexam_data <- read_csv(\"data/Exam_data.csv\")\n\nRows: 322 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): ID, CLASS, GENDER, RACE\ndbl (3): ENGLISH, MATHS, SCIENCE\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."
  },
  {
    "objectID": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#ploting-trellis-boxplots",
    "href": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#ploting-trellis-boxplots",
    "title": "Hands-on Exercise 1",
    "section": "Ploting trellis boxplots",
    "text": "Ploting trellis boxplots\n\nggplot(data = exam_data,\n       aes(x = CLASS, y = MATHS)) + \n  geom_boxplot(outlier.colour=\"black\",\n               outlier.shape=16,\n               outlier.size=1, \n               notch=FALSE) + \n  facet_grid(cols = vars(GENDER))\n\n\n\n\n\nggplot(data = exam_data,\n       aes(x = CLASS, y = MATHS)) + \n  geom_boxplot(outlier.colour=\"black\",\n               outlier.shape=16,\n               outlier.size=1, \n               notch=FALSE) + \n  facet_grid(rows = vars(GENDER))\n\n\n\n\n\nggplot(data = exam_data,\n       aes(x = GENDER, y = MATHS)) + \n  geom_boxplot(outlier.colour=\"black\",\n               outlier.shape=16,\n               outlier.size=1, \n               notch=FALSE) + \n  facet_grid(cols = vars(CLASS),\n             rows = vars(GENDER))"
  },
  {
    "objectID": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#ploting-horizontal-bar-chart",
    "href": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#ploting-horizontal-bar-chart",
    "title": "Hands-on Exercise 1",
    "section": "Ploting horizontal bar chart",
    "text": "Ploting horizontal bar chart\n\nggplot(data=exam_data, \n       aes(x=RACE)) +\n  geom_bar() +\n  coord_flip() +\n  theme_minimal() +\n  theme(panel.background = element_rect(fill = \"light blue\",\n                                        colour = \"light blue\"),\n        panel.grid.major = element_line(linewidth = 0.5,\n                                        linetype = 'solid',\n                                        colour = \"white\"),\n        panel.grid.minor = element_line(linewidth = 0.25,\n                                        linetype = 'solid',\n                                        colour = \"white\"))"
  },
  {
    "objectID": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#makeover-design",
    "href": "Hands_on_ex/Hands_on_ex01/Hands_on_ex01.html#makeover-design",
    "title": "Hands-on Exercise 1",
    "section": "Makeover design",
    "text": "Makeover design\n\npacman::p_load(forcats)\n\nexam_data %>%\n  mutate(RACE = fct_infreq(RACE)) %>%\n  ggplot(aes(x=RACE)) +\n  geom_bar() + \n  ylim(0,225) + \n  geom_text(\n    stat = \"count\",\n    aes(label=paste0(after_stat(count),\", \",\n                     round(after_stat(count)/sum(after_stat(count))*100,\n                           1),\"%\")),\n                      vjust=-1,\n                      size=3) +\n  xlab(\"Race\") +\n  ylab(\"No. of\\nPupils\") +\n  theme(axis.title.y = element_text(angle=0))\n\n\n\n\n\nggplot(data=exam_data, \n       aes(x=MATHS)) +\n  geom_histogram(bins = 20, \n                 color = \"black\", \n                 fill = \"light blue\") + \n  geom_vline(aes(xintercept = mean(MATHS)),\n             linetype = \"dashed\",\n             color = 'red') +\n  geom_vline(aes(xintercept = median(MATHS)),\n             linetype = \"dashed\",\n             color = 'black')\n\n\n\n\n\neng_bg <- exam_data[,-3]\n\nggplot(data=exam_data, \n       aes(x=ENGLISH, fill=GENDER)) +\n  geom_histogram(data = eng_bg, fill = \"grey\") +\n  geom_histogram(color = \"black\") +\n  facet_wrap(~GENDER) +\n  ylim(0,30)\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\nggplot(data=exam_data, \n       aes(x=MATHS, y=ENGLISH)) +\n  geom_point(size=1) +\n  xlim(0,105) +\n  ylim(0,105) +\n  geom_vline(aes(xintercept = 50),\n             linetype = \"dashed\",\n             color = 'grey') +\n  geom_hline(aes(yintercept = 50),\n             linetype = \"dashed\",\n             color = 'grey')"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ISSS608 Visual Analytics and Applications",
    "section": "",
    "text": "This page contains all my coursework prepared for the SMU MITB course ISSS608 Visual Analytics and Applications.\nFor queries or clarifications on this site, please drop me an email (link attached at sidebar)."
  },
  {
    "objectID": "In_class_ex/In_class_ex03/In_class_ex03.html",
    "href": "In_class_ex/In_class_ex03/In_class_ex03.html",
    "title": "In-class Exercise 3",
    "section": "",
    "text": "Installing and loading R packages\nTwo packages will be installed and loaded. They are: tidyverse and ggiraph.\n\npacman::p_load(ggiraph, tidyverse)\n\nImporting data\n\nexam_data <- read_csv(\"data/Exam_data.csv\", col_names = T, show_col_types = F)\n\nPlot a graph\n\np <- ggplot(exam_data,\n       aes(x = MATHS)) +\n  geom_dotplot_interactive(\n    aes(tooltip=ID),\n    stackgroups = T,\n    binwidth = 1, \n    method = 'histodot') +\n  scale_y_continuous(NULL, breaks = NULL)\n\ngirafe(\n  ggobj = p,\n  width_svg = 6,\n  height_svg = 6*0.618\n)"
  },
  {
    "objectID": "In_class_ex/In_class_ex04/In_class_ex04.html",
    "href": "In_class_ex/In_class_ex04/In_class_ex04.html",
    "title": "In-class Exercise 4",
    "section": "",
    "text": "pacman::p_load(plotly, DT, patchwork, ggstatsplot, tidyverse, ggside, readxl, performance, parameters, see)\n\n\nExam Data Set\n\nexam_data <- read_csv(\"data/Exam_data.csv\")\n\n\nplot_ly(data = exam_data, \n        x = ~ENGLISH, \n        y = ~MATHS, \n        color = ~RACE)\n\n\n\n\n\n\np <- ggplot(data=exam_data, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(size = 1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nggplotly(p) #<<\n\n\n\n\n\n\nggbetweenstats(\n  data = exam_data,\n  x = GENDER, \n  y = MATHS,\n  type = \"p\",\n  messages = FALSE\n)\n\n\n\n\n\nggscatterstats(\n  data = exam_data,\n  x = MATHS, \n  y = ENGLISH,\n  marginal = TRUE\n)\n\n\n\n\n\nmy_sum <- exam_data %>%\n  group_by(RACE) %>%\n  summarise(\n    n=n(),\n    mean=mean(MATHS),\n    sd=sd(MATHS)\n    ) %>%\n  mutate(se=sd/sqrt(n-1))\n\nggplot(my_sum) +\n  geom_errorbar(\n    aes(x=RACE, \n        ymin=mean-se, \n        ymax=mean+se), \n    width=0.2, \n    colour=\"black\", \n    alpha=0.9, \n    linewidth=0.5) +\n  geom_point(aes\n           (x=RACE, \n            y=mean), \n           stat=\"identity\", \n           color=\"red\",\n           size = 1.5,\n           alpha=1) +\n  ggtitle(\"Standard error of mean maths score by race\")\n\n\n\n\n\n\nToyota Data Set\n\ncar_resale <- read_xls(\"data/ToyotaCorolla.xls\", \"data\")\n\ncar_resale\n\n# A tibble: 1,436 × 38\n      Id Model       Price Age_0…¹ Mfg_M…² Mfg_Y…³     KM Quart…⁴ Weight Guara…⁵\n   <dbl> <chr>       <dbl>   <dbl>   <dbl>   <dbl>  <dbl>   <dbl>  <dbl>   <dbl>\n 1    81 TOYOTA Cor… 18950      25       8    2002  20019     100   1180       3\n 2     1 TOYOTA Cor… 13500      23      10    2002  46986     210   1165       3\n 3     2 TOYOTA Cor… 13750      23      10    2002  72937     210   1165       3\n 4     3  TOYOTA Co… 13950      24       9    2002  41711     210   1165       3\n 5     4 TOYOTA Cor… 14950      26       7    2002  48000     210   1165       3\n 6     5 TOYOTA Cor… 13750      30       3    2002  38500     210   1170       3\n 7     6 TOYOTA Cor… 12950      32       1    2002  61000     210   1170       3\n 8     7  TOYOTA Co… 16900      27       6    2002  94612     210   1245       3\n 9     8 TOYOTA Cor… 18600      30       3    2002  75889     210   1245       3\n10    44 TOYOTA Cor… 16950      27       6    2002 110404     234   1255       3\n# … with 1,426 more rows, 28 more variables: HP_Bin <chr>, CC_bin <chr>,\n#   Doors <dbl>, Gears <dbl>, Cylinders <dbl>, Fuel_Type <chr>, Color <chr>,\n#   Met_Color <dbl>, Automatic <dbl>, Mfr_Guarantee <dbl>,\n#   BOVAG_Guarantee <dbl>, ABS <dbl>, Airbag_1 <dbl>, Airbag_2 <dbl>,\n#   Airco <dbl>, Automatic_airco <dbl>, Boardcomputer <dbl>, CD_Player <dbl>,\n#   Central_Lock <dbl>, Powered_Windows <dbl>, Power_Steering <dbl>,\n#   Radio <dbl>, Mistlamps <dbl>, Sport_Model <dbl>, Backseat_Divider <dbl>, …\n\n\n\nmodel <- lm(Price ~ Age_08_04 + Mfg_Year + KM + Weight + Guarantee_Period, \n            data = car_resale)\nmodel\n\n\nCall:\nlm(formula = Price ~ Age_08_04 + Mfg_Year + KM + Weight + Guarantee_Period, \n    data = car_resale)\n\nCoefficients:\n     (Intercept)         Age_08_04          Mfg_Year                KM  \n      -2.637e+06        -1.409e+01         1.315e+03        -2.323e-02  \n          Weight  Guarantee_Period  \n       1.903e+01         2.770e+01  \n\n\n\ncheck_c <- check_collinearity(model)\nplot(check_c)\n\n\n\n\n\nmodel1 <- lm(Price ~ Age_08_04 + KM + Weight + Guarantee_Period, \n             data = car_resale)\n\ncheck_n <- check_normality(model1)\n\nplot(check_n)\n\n\n\n\n\ncheck_model(model1)"
  },
  {
    "objectID": "In_class_ex/In_class_ex05/In_class_ex05-tern.html",
    "href": "In_class_ex/In_class_ex05/In_class_ex05-tern.html",
    "title": "In-class Exercise 5: Ternery Diagram",
    "section": "",
    "text": "pacman::p_load(ggtern, tidyverse, plotly)\n\n\npop_data <- read_csv(\"data/respopagsex2000to2018_tidy.csv\") \n\n\nagpop_mutated <- pop_data %>%\n  mutate(`Year` = as.character(Year))%>%\n  spread(AG, Population) %>%\n  mutate(YOUNG = rowSums(.[4:8]))%>%\n  mutate(ACTIVE = rowSums(.[9:16]))  %>%\n  mutate(OLD = rowSums(.[17:21])) %>%\n  mutate(TOTAL = rowSums(.[22:24])) %>%\n  filter(Year == 2018)%>%\n  filter(TOTAL > 0)\n\n\nggtern(data=agpop_mutated, aes(x=YOUNG,y=ACTIVE, z=OLD)) +\n  geom_point() +\n  labs(title=\"Population structure, 2015\") +\n  theme_rgbw()\n\n\n\n\n\nlabel <- function(txt) {\n  list(\n    text = txt, \n    x = 0.1, y = 1,\n    ax = 0, ay = 0,\n    xref = \"paper\", yref = \"paper\", \n    align = \"center\",\n    font = list(family = \"serif\", size = 15, color = \"white\"),\n    bgcolor = \"#b3b3b3\", bordercolor = \"black\", borderwidth = 2\n  )\n}\n\naxis <- function(txt) {\n  list(\n    title = txt, tickformat = \".0%\", tickfont = list(size = 10)\n  )\n}\n\nternaryAxes <- list(\n  aaxis = axis(\"Young\"), \n  baxis = axis(\"Active\"), \n  caxis = axis(\"Old\")\n)\n\nplot_ly(\n  agpop_mutated, \n  a = ~YOUNG, \n  b = ~ACTIVE, \n  c = ~OLD, \n  color = I(\"black\"), \n  type = \"scatterternary\"\n) %>%\n  layout(\n    annotations = label(\"Ternary Markers\"), \n    ternary = ternaryAxes\n  )"
  },
  {
    "objectID": "In_class_ex/In_class_ex05/In_class_ex05.html",
    "href": "In_class_ex/In_class_ex05/In_class_ex05.html",
    "title": "In-class Exercise 5: Correlation",
    "section": "",
    "text": "pacman::p_load(seriation, dendextend, heatmaply, corrplot, tidyverse, ggstatsplot)\n\n\nWine Data\n\nwine <- read_csv(\"data/wine_quality.csv\")\n\npairs(wine[,1:11])\n\n\n\n\n\nggstatsplot::ggcorrmat(\n  data = wine, \n  cor.vars = 1:11,\n  ggcorrplot.args = list(outline.color = \"black\", \n                         hc.order = TRUE,\n                         tl.cex = 10),\n  title    = \"Correlogram for wine dataset\",\n  subtitle = \"Four pairs are not significant at p < 0.05\"\n)\n\n\n\n\n\nwine.cor <- cor(wine[, 1:11])\n\ncorrplot(wine.cor, method = \"ellipse\")\n\n\n\n\n\ncorrplot.mixed(wine.cor, \n               lower = \"ellipse\", \n               upper = \"number\",\n               tl.pos = \"lt\",\n               diag = \"l\",\n               tl.col = \"black\")\n\n\n\n\n\ncorrplot(wine.cor, \n         method = \"ellipse\", \n         tl.pos = \"lt\",\n         tl.col = \"black\",\n         order=\"hclust\",\n         hclust.method = \"ward.D\",\n         addrect = 3)\n\n\n\n\n\n\nWH Data\n\nwh <- read_csv(\"data/WHData-2018.csv\")\n\nrow.names(wh) <- wh$Country\n\n\nwh1 <- dplyr::select(wh, c(3, 7:12))\nwh_matrix <- data.matrix(wh)\n\n\nwh_heatmap <- heatmap(wh_matrix,\n                      Rowv=NA, Colv=NA)\n\n\n\n\n\nheatmaply(normalize(wh_matrix[, -c(1, 2, 4, 5)]),\n          seriate = \"none\",\n          colors = Blues)\n\n\n\n\n\n\nheatmaply(normalize(wh_matrix[, -c(1, 2, 4, 5)]),\n          Colv=NA,\n          seriate = \"none\",\n          colors = Blues,\n          k_row = 5,\n          margins = c(NA,200,60,NA),\n          fontsize_row = 4,\n          fontsize_col = 5,\n          main=\"World Happiness Score and Variables by Country, 2018 \\nDataTransformation using Normalise Method\",\n          xlab = \"World Happiness Indicators\",\n          ylab = \"World Countries\"\n          )"
  },
  {
    "objectID": "Take_home_ex/Take_home_ex01/Take_home_ex01.html",
    "href": "Take_home_ex/Take_home_ex01/Take_home_ex01.html",
    "title": "Take Home Exercise 1",
    "section": "",
    "text": "Task\nIn this Take Home Exercise, age-sex pyramids across nine selected planning areas in trellis display are created using Tableau Desktop.\n\n\nData Source\nThe data “Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022” used for this Take Home Exercise is obtained from the Department of Statistics, Singapore in csv format.\n\n\nCreating the Analytical Visualization on Tableau\n\n\n\n\n\n\n\n\nNo.\nSteps\nScreenshot\n\n\n\n\n1\nLoad the csv file into Tableau: Connect To a File > Text file.\n\n\n\n2\nIn a new Worksheet, Age is dragged to the Rows shelf. Since Age is already grouped into bins, it can be used as-is. The age groups are sorted in descending order: right-click on AG > Sort > Sort by Data Source Order - Descending.\n\n\n\n3\nFor a neater look of the final chart, the underscores (_) are removed from the labels: Data pane > right-click on AG > Aliases > Edit aliases accordingly.\n\n\n\n4\nPrior to creating the age-sex pyramid, the Population field is split into two for each Gender: Analysis > Create Calculated Field. The calculated fields MalePop and FemalePop are created with the following formula:\nIF [Sex]='Males' THEN [Pop] END\nIF [Sex]='Females' THEN [Pop] END\n\n\n\n5\nThe proportion of males and females in the total population is then computed as calculated fields MalePct and FemalePct.\nSUM([MalePop])/TOTAL(SUM([Pop]))\nSUM([FemalePop])/TOTAL(SUM([Pop]))\n\n\n\n6\nNext, a reference line that shows the average percentage of male and female population for Singapore in each age group across all planning areas is created.\nFirstly, the calculated fields MalePop_Fixed, FemalePop_Fixed and TotalPop_Fixed. FIXED level of detail expressions are used in the calculation so that the values can be created without reference to the dimensions in the worksheet later on.\n{FIXED [AG]: SUM([FemalePop])}\n{FIXED [AG]: SUM([MalePop])}\n{FIXED [AG]: SUM([Pop])}\n\n\n\n7\nAgain, the proportion of males and females in the total population is then computed as calculated fields MalePct_Fixed and FemalePct_Fixed.\nSUM([FemalePop_Fixed])/ TOTAL(SUM([TotalPop_Fixed]))\nSUM([MalePop_Fixed])/ TOTAL(SUM([TotalPop_Fixed]))\n\n\n\n8\nNext, the fields MalePct, MalePct_Fixed, FemalePct and FemalePct_Fixed are dragged to the Columns shelf. Right-click on MalePct_Fixed and FemalePct_Fixed in the the Columns shelf to create a dual axis. This will allow MalePct and MalePct_Fixed to use the same axis, as with FemalePct and FemalePct_Fixed.\n\n\n\n9\nRight-click on the MalePct axis to reverse it and create the shape of the age-sex pyramid.\n\n\n\n10\nAs we have a dual axis between MalePct and MalePct_Fixed and between FemalePct and FemalePct_Fixed, right-click on each of the axis to synchronize axis.\n\n\n\n11\nIn the Marks card, MalePct and FemalePct are changed to a bar chart, and MalePct_Fixed and FemalePct_Fixed are changed to a line chart.\n\n\n\n12\nNext, drag MalePct to Color in the MalePct Marks card to create a colour gradient based on the values. At the top right-hand corner of the legend, right-click to select Edit Title and amend to “% Males” for better clarity.\n\n\n\n13\nSimilarly, drag FemalePct to Color in the FemalePct Marks card to create a colour gradient based on the values. At the top right-hand corner of the legend, right-click to select Edit Title and amend to “% Females” for better clarity. The colour is also changed to a contrasting colour orange: right-click top right hand corner of legend > Edit Colors > amend Palette to Orange.\n\n\n\n14\nUnder the MalePct_Fixed and FemalePct_Fixed Marks cards, amend the Size of the line and change the Marker under Color for ease of readability of the reference line in the chart.\n\n\n\n15\nChange the chart view to Entire View.\n\n\n\n16\nDrag the PA field to the Columns shelf and sort it based on population size: right-click to select Sort > Sort by Field – Sort Order of Descending – Field Name: Pop – Aggregation: Sum.\nAdd the PA field and filter for the top nine most populous planning areas: right-click to select Edit Filter > select Top tab > filter By field – Top 9 by Pop – Sum.\n\n\n\n17\nRight-click on any x-axis and select Format to edit the number format on the scale for all four measures (MalePct, MalePct_Fixed, FemalePct and FemalePct_Fixed) shown in the chart. The number format is changed to Percentage – 1 decimal place.\n\n\n\n18\nRight-click on the x-axis at the top of the chart to uncheck Show Header.\n\n\n\n19\nRight-click on any x-axis and select Edit Axis. Change the Range to Fixed end (0.07) and remove the Axis Titles.\n\n\n\n20\nNext, perform other formatting to the PA field: right-click on PA header > select Format > adjust the default font type (bold) and colour (black). Then right-click on PA header again > select Hide Field Labels for Columns so that only the planning areas are shown but not the field name. Also right-click on AG header > Hide Field Labels for Rows so that only the age groups are shown but not the field name.\n\n\n\n21\nRight-click on Sheet Title and select Edit Title to add a chart title and subtitle.\n\n\n\n22\nDrag MalePct to Label in the MalePct Marks card to create mark labels. Click on Label and check the box for Show Mark Labels – change Scope to Pane. Then right-click on the mark label to format the number to Percentage – 1 decimal place.\nRepeat this step for the FemalePct Marks card.\n\n\n\n23\nLastly, create a new Dashboard and drag the worksheet to the dashboard. The legends are dragged to the bottom of the dashboard. A text box is also added to include the data source. Lastly, change the Size to Automatic.\n\n\n\n\n\n\nPatterns observed in this Analytical Visualization\n\n\n\n\n\n\nHow to read the chart\nThe analytical visualization consists of age-sex pyramids for nine selected planning areas in Singapore presented in trellis display. The selection of planning areas is based on population size – the top nine most populous planning areas have been chosen.\n\nEach pyramid starts at zero population in the centre and extends left for the male population (in blue) and right for the female population (in orange).\nThe bar charts within each pane shows the proportion of male and female population within the selected planning area.\nEach bar in the pyramid represents a band of five years and is arranged from birth (at the bottom) to old age (at the top).\nFor comparison purposes, the grey reference line shows the average percentage of male and female population for Singapore in each age group across all planning areas.\n\n\n\nShape of age-sex pyramids\nIn general, all nine age-sex pyramids have relatively narrow bases, which is expected of a highly urbanized and developed country such as Singapore, where there is high life expectancy and low mortality and fertility rates.\nMost of the top planning areas (except Punggol and Sengkang) have constrictive age-sex pyramids, which are characterized by urn-shaped graphs with a narrow base. This observation could be attributed to the presence of highly mature housing estates in these planning areas.\nIn contrast, the population pyramids of Punggol and Sengkang appear more “arrow-shaped” and are more characteristic of newer and younger housing estates, where bulk of the population falls within into two main age groups of 30-49 years and 0-19 years. This could be due to the trend of younger couples moving to newer housing estates like Punggol and Seng Kang over the past decade to start their own families.\n\n\nTrends by age groups\nThe proportion of the younger population (0-19 years) in most planning areas is on par with the national average, except in Punggol and Sengkang where the proportion is above average.\nFor the working age population (20-59 years), the pyramid has a “bulging” out trend in Punggol and Sengkang. In contrast, there appears to be a “hollowing” effect especially in Tampines and Choa Chu Kang.\nFrom the age of 60 onwards, the proportion of elderly in Bedok, Tampines and Hougang is above national average, while the reverse is true for Punggol, Sengkang, Woodlands and Choa Chu Kang.\n\n\nTrends by gender\nBetween genders, population trends appear largely similar across the top planning areas except in Punggol where the male working age population appear to be on average, slightly older than their female counterparts.\nIn addition, among the extremely old (75 and older), the proportion of female population is observed to be greater than the male population. This trend is aligned with the gender gap in life expectancy that is observed both globally and locally."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex02/Take_home_ex02.html",
    "href": "Take_home_ex/Take_home_ex02/Take_home_ex02.html",
    "title": "Take Home Exercise 2",
    "section": "",
    "text": "In this Take Home Exercise, a peer submission of a visualization on the Age-Sex Pyramids by Planning Area in Singapore is critiqued on clarity and aesthetics, redesigned using data visualisation principles and best practices, and remade using ggplot2, ggplot2 extensions and tidyverse packages."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#clarity",
    "href": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#clarity",
    "title": "Take Home Exercise 2",
    "section": "Clarity",
    "text": "Clarity\n\nWhat Worked Well\nIn general, the visualization is clear in terms of layout. Each chart within the submission has a chart title to annotate what the chart is about, which makes the objective of the visualization clear to the reader.\nThe display of an overall age-sex pyramid of Singapore population also provides a good reference against the age-sex pyramids of the top nine most populous planning areas.\n\n\nAreas of Improvement\nHowever, the age-sex pyramids appear confusing to the reader as it is unclear what the grey bars represent, since it is not clearly annotated on the chart.\nIn addition, due to the size of the data labels, the pyramid charts appear cluttered and it is difficult to analyze the shape of each pyramid, especially those within the trellis display.\nAnother possible area of improvement in the visualization is the placement of the Male vs. Female populations. As age-sex pyramids are technical diagrams used by those studying population geography, conforming to the standard practice of graphing the Male population on the left side of the pyramid and the Female population on the right may make the visualization more intuitive for readers to interpret.\nLastly, while the top-right chart shows the top nine most populous planning areas ranked in descending order, the trellis display does not make use of the same order to arrange the age-sex pyramids of the planning areas. Conforming to the same display order may also improve readability of the visualization."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#aesthetics",
    "href": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#aesthetics",
    "title": "Take Home Exercise 2",
    "section": "Aesthetics",
    "text": "Aesthetics\n\nWhat Worked Well\nThe choice of blue and pink bars are pleasing to the eye and provide clear and intuitive distinction between the Male and Female populations respectively.\n\n\nAreas of Improvement\nHowever, the large data labels clutter the visualization with unnecessary detail and take the attention away from the shape of the age-sex pyramids. In addition, the age group labels are presented in their raw form with the underscores (_) in the label, which adds to the clutter.\nUpon further examination of the chart, it also appears that the grey bars are showing the population of the opposite gender i.e. the grey bars in the \"Female population\" side of the pyramid are showing exactly the same data as the blue bars in the \"Male population\" side, and vice versa (Fig 2). This means that there are duplicates of the same information within the chart that do not value add to the chart.\n\n\n\nFig 2: Illustration of computation of grey bars in visualization\n\n\nAnother area of duplication in the visualization is the highlighting of the top nine most populous planning areas. Apart from being shown in the trellis display, it is also shown in the top-right graph “Population by Areas”, suggesting the latter could be made redundant and incorporated into the former."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#data-wrangling",
    "href": "Take_home_ex/Take_home_ex02/Take_home_ex02.html#data-wrangling",
    "title": "Take Home Exercise 2",
    "section": "Data Wrangling",
    "text": "Data Wrangling\nThe packages tidyverse, patchwork and scales will be used to remake the visualization.\nAfter the data is loaded, the age groups labels are tidied up to remove the underscores (_) and reordered in chronological order (young at bottom, elderly at top).\n\npacman::p_load(tidyverse, patchwork, scales)\n\npop_data <- read_csv(\"data/respopagesextod2022.csv\",show_col_types = FALSE)\n\n#Replace underscores in age group (AG) with spaces\npop_data$AG <- gsub(\"_\", \" \", pop_data$AG)\n\n#Reorder age group (AG)\nlevel_order <- c(\"0 to 4\", \"5 to 9\", \"10 to 14\", \"15 to 19\", \n                 \"20 to 24\", \"25 to 29\", \"30 to 34\", \"35 to 39\", \n                 \"40 to 44\", \"45 to 49\", \"50 to 54\", \"55 to 59\", \n                 \"60 to 64\", \"65 to 69\", \"70 to 74\", \"75 to 79\", \n                 \"80 to 84\", \"85 to 89\", \"90 and over\")\n\nThe data is then tabulated accordingly and prepared for use in the various age-sex pyramids plots (total and by planning area).\n\n#Tabulate population by age group (AG), planning area (PA) and gender (sex)\npop_data_tab <- pop_data %>%\n  group_by(PA, AG, Sex) %>%\n  summarise(Pop_sum = sum(Pop)) %>%\n  ungroup()\n\n#Filter for top 9 planning area (PA)\npercent <- function(x, digits = 1, format = \"f\", ...) {\n  paste0(formatC(x * 100, format = format, digits = digits, ...), \"%\")\n}\n\ntop9pa <- pop_data_tab %>%\n  group_by(PA) %>%\n  summarise(PA_pop = sum(Pop_sum)) %>%\n  mutate(PA_pop_pct = percent(PA_pop/sum(pop_data$Pop))) %>%\n  top_n(n=9, wt=PA_pop) %>%\n  arrange(desc(PA_pop)) %>%\n  ungroup()\n\n#Compute planning area (PA) % per age group (AG) \npop_data_PA_pct <- pop_data_tab %>%\n  group_by(PA) %>%\n  mutate(PA_sum = sum(Pop_sum)) %>%\n  group_by(PA, AG) %>%\n  mutate(PA_pct = Pop_sum*100/PA_sum) %>%\n  ungroup()\n\n#Tabulate population by age group (AG) and gender (sex)\npop_total <- pop_data %>%\n  group_by(AG, Sex) %>%\n  summarise(Pop_sum = sum(Pop)) %>%\n  mutate(AG = factor(AG, level = level_order))%>%\n  arrange(AG) %>%\n  ungroup()\n\n#Compute overall % per age group (AG)\npop_pct <- pop_total %>%\n  mutate(Pop_pct = Pop_sum*100/sum(Pop_sum)) %>%\n  ungroup()\n\nNext, the age-sex pyramid for the overall Singapore population is created using geom_col. Relevant labels are also added to the chart.\n\n#Prepare data for age-sex pyramid for overall Singapore population\npop_pyramid_data <- pop_pct %>%\n  mutate(Pop_pct = ifelse(Sex==\"Males\", Pop_pct*(-1), Pop_pct*1))\n\n#Plot age-sex pyramid\np <- ggplot() + \n  geom_col(data = pop_pyramid_data, \n           aes(x = Pop_pct, y = AG, fill = Sex)) +\n  scale_x_continuous(limits = c(-6,6),\n                     breaks = seq(-6, 6, 2), \n                     labels = paste0(as.character(c(seq(6, 0, -2), \n                                                    seq(2, 6, 2))),\n                                     \"%\")) +\n  labs(title = \"Total Population for Singapore\", x = \"Population\", \n       y = \"Age Groups\") + \n  theme(text = element_text(size = 10)) + \n  scale_fill_manual(values = c(\"Males\" = \"cornflowerblue\",\n                               \"Females\" = \"lightpink2\")) +\n  theme(legend.position = \"none\")\n\np\n\n\n\n\nFor the trellis display, labels are also created for the individual panes.\n\n#Create a planning area (PA) filter for facet wrap\nPA_labels <- paste(\":\",top9pa$PA_pop_pct,\"of population\")\n\nappender <- function(string, suffix = PA_labels) paste0(string, suffix)\n\nThe age-sex pyramids for the top nine most populous planning areas are then created using a similar method used for the age-sex pyramid of the entire Singapore population created above.\n\n#Prepare data for age-sex pyramids of top 9 planning areas\nfacet_pyramid_data <- pop_data_PA_pct %>%\n  filter(PA %in% top9pa$PA) %>%\n  mutate(across(PA, factor, levels=top9pa$PA)) %>%\n  mutate(PA_pct = ifelse(Sex==\"Males\", PA_pct*(-1), PA_pct*1)) %>%\n  mutate(AG = factor(AG, level = level_order))%>%\n  arrange(PA, AG)\n\n#Plot age-sex pyramids with reference line\nf <- ggplot() +\n  geom_col(data = facet_pyramid_data, \n                  aes(x = PA_pct, y = AG, fill=Sex),\n                  position = \"stack\") +\n  geom_path(data = pop_pyramid_data,\n            aes(x = Pop_pct, y = AG, group=Sex),\n            stat = \"identity\", linetype = \"dashed\", linewidth = 0.4) + \n  scale_x_continuous(limits = c(-6,6),\n                     breaks = seq(-6, 6, 2), \n                     labels = paste0(as.character(c(seq(6, 0, -2), \n                                                    seq(2, 6, 2))),\"%\")) +\n  labs(title = \"Top 9 Most Populous Planning Areas\", \n       x = \"Population by Planning Area\", y = \"\") +\n  facet_wrap(vars(PA), ncol=3, labeller=as_labeller(appender)) + \n  theme(axis.text.x = element_text(size = 6),\n        axis.text.y = element_text(size = 6),\n        strip.text = element_text(size = 7),\n        plot.title = element_text(size = 12)) +\n  scale_fill_manual(values = c(\"Males\" = \"cornflowerblue\", \n                               \"Females\" = \"lightpink2\"))\n\nf\n\n\n\n\nLastly, since the plots are combined into one visualization, where there are duplicate elements (e.g. legend), only one set is kept and the other dropped. A visualization title and the data source are also added to the top and bottom of the chart respectively.\n\n#Combine both plots\nfinalviz <- p + f + plot_layout(widths = c(4, 5))\n\nfinalviz + plot_annotation(\n  title = \"Age-Sex Pyramid for Singapore as at June 2022\",\n  caption = \"Source: Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, June 2022. From the Department of Statistics, Singapore (2022)\",\n  theme = theme(plot.title = element_text(size = 18),\n                plot.caption = element_text(hjust = 0.5))\n)"
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html",
    "title": "Take Home Exercise 3",
    "section": "",
    "text": "In this Take Home Exercise, salient patterns of the resale prices of public housing property by residential towns and estates in Singapore are uncovered using analytical visualisation techniques. The focus of this exercise will be on 3-ROOM, 4-ROOM and 5-ROOM types transacted in 2022."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex_03.html",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex_03.html",
    "title": "Take Home Exercise 3",
    "section": "",
    "text": "Task\nIn this Take Home Exercise, salient patterns of the resale prices of public housing property by residential towns and estates in Singapore are uncovered using analytical visualisation techniques. The focus of this exercise will be on 3-ROOM, 4-ROOM and 5-ROOM types transacted in 2022.\n\n\nData Source\nThe data “Resale flat princes based on registration date from Jan-2017 onwards” used for this Take Home Exercise is obtained from Data.gov.sg in csv format.\n\n\nData Preparation\nFirst, the packages and the data set is loaded.\n\npacman::p_load(patchwork, performance, tidyverse, ggstatsplot, FunnelPlotR, plotly, knitr, nortest, RColorBrewer)\n\nhdb_data <- read_csv(\"data/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv\")\n\nhead(hdb_data)\n\n# A tibble: 6 × 11\n  month   town     flat_…¹ block stree…² store…³ floor…⁴ flat_…⁵ lease…⁶ remai…⁷\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>     <dbl> <chr>     <dbl> <chr>  \n1 2017-01 ANG MO … 2 ROOM  406   ANG MO… 10 TO …      44 Improv…    1979 61 yea…\n2 2017-01 ANG MO … 3 ROOM  108   ANG MO… 01 TO …      67 New Ge…    1978 60 yea…\n3 2017-01 ANG MO … 3 ROOM  602   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n4 2017-01 ANG MO … 3 ROOM  465   ANG MO… 04 TO …      68 New Ge…    1980 62 yea…\n5 2017-01 ANG MO … 3 ROOM  601   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n6 2017-01 ANG MO … 3 ROOM  150   ANG MO… 01 TO …      68 New Ge…    1981 63 yea…\n# … with 1 more variable: resale_price <dbl>, and abbreviated variable names\n#   ¹​flat_type, ²​street_name, ³​storey_range, ⁴​floor_area_sqm, ⁵​flat_model,\n#   ⁶​lease_commence_date, ⁷​remaining_lease\n\n\nIt can be seen that the column “month” is shown as a string rather than as dates - this will need to be transformed for ease of analysis. Likewise for the “remaining_lease” column, which will be transformed into a common measure of time i.e. in years.\nSince the focus of this analysis is only on transactions that happened in 2022 and for 3-room, 4-room and 5-room HDB flats, we will also need to filter the data accordingly. Lastly, we will also drop columns which we do not need (e.g. “block”, “street name”) for the analysis.\n\n\nShow code\n#Transform data\nhdb_data_cleaned <- hdb_data %>%\n  mutate(trans_date = as.Date(paste0(month,\"-01\"))) %>%\n  mutate(remaining_lease = as.integer(str_extract(remaining_lease, \"[0-9]+\")) +\n           ifelse(is.na(str_extract(remaining_lease, \" [0-9]+\")), 0, \n                  as.integer(str_extract(remaining_lease,\" [0-9]+\"))/12)) %>%\n  mutate(month = format(as.Date(trans_date, format=\"%Y-%m-%d\"),\"%m\"))\n  \n#Filter for 3RM, 4RM, 5RM transactions in 2022\nhdb_2022 <- hdb_data_cleaned %>%\n  filter(between(trans_date, as.Date(\"2022-01-01\"), as.Date(\"2022-12-31\"))) %>%\n  filter(flat_type %in% c(\"3 ROOM\", \"4 ROOM\", \"5 ROOM\")) %>%\n  select(\"town\", \"flat_type\", \"storey_range\", \"floor_area_sqm\", \n         \"remaining_lease\", \"resale_price\", \"trans_date\", \"month\")\n\n\n\n\nNormality Assumption\ndistribution of resale prices against floor area (sqm) across towns.\n\n#computing number of transactions by town and flat type"
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#normality-assumption",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#normality-assumption",
    "title": "Take Home Exercise 3",
    "section": "Normality Assumption",
    "text": "Normality Assumption\nWe will first take a look at the distribution of resale prices nationwide for the target property types using a histogram and a boxplot.\n\n\nShow code\n#computing summary statistics of mean, median and lower and upper whiskers in boxplot\nresale_mean <- round(mean(hdb_2022$resale_price))\nresale_median <- round(median(hdb_2022$resale_price))\nymax <- as.numeric(round((IQR(hdb_2022$resale_price)*1.5) +\n                quantile(hdb_2022$resale_price,0.75)))\nymin <- as.integer(min(hdb_2022$resale_price))\n\n#plotting histogram\nh <- ggplot(data = hdb_2022, aes(x = resale_price)) + \n  geom_histogram(color=\"black\", fill=\"azure4\", binwidth = 50000) + \n  scale_x_continuous(limits = c(0,1500000), labels = scales::comma) +\n  labs(x = \"Resale Price (SGD)\", y = \"Number of transactions\") +\n  geom_vline(aes(xintercept = resale_mean), col=\"darkblue\", linewidth=1) +\n  annotate(\"text\", x=640000, y=4000, label=\"Mean resale price:\", \n           size=4, color=\"darkblue\") +\n  annotate(\"text\", x=640000, y=3750, label=format(resale_mean, big.mark = \",\"),\n           size=4, color=\"darkblue\") +\n  geom_vline(aes(xintercept = resale_median), col=\"lightpink4\", linewidth=1) +\n  annotate(\"text\", x=400000, y=4000, label=\"Median resale price\", \n           size=4, color=\"lightpink4\") +\n  annotate(\"text\", x=400000, y=3750, label=format(resale_median, big.mark = \",\"),\n           size=4, color=\"lightpink4\") +\n  theme(axis.text.x = element_text(size=8))\n\n#plotting boxplot\nb <- ggplot(data = hdb_2022, aes(y = resale_price)) + \n  geom_boxplot(outlier.colour=\"firebrick\", outlier.shape=16,\n               outlier.size=1, notch=FALSE) + \n  coord_flip() + labs(y = \"\", x = \"\") + \n  scale_y_continuous(limits = c(0,1500000), labels = scales::comma) +\n  theme(axis.text = element_blank(), axis.ticks = element_blank()) + \n  stat_boxplot(geom=\"errorbar\", width=0.5) + \n  annotate(\"text\", x=0.35, y=ymax, label=format(ymax, big.mark = \",\"), \n           size=3, color=\"lightpink4\") +\n  annotate(\"text\", x=0.35, y=ymin, label=format(ymin, big.mark = \",\"), \n           size=3, color=\"lightpink4\")\n\n#combining plots\nprice_distri <- b / h + plot_layout(heights = c(1, 4)) \n\nprice_distri + plot_annotation(title = \"Distribution of Resale Prices of 3/4/5-Room HDB flats in 2022\", \n                               subtitle = \"There is a right-skewed distribution i.e. mean resale price > median resale price. There is also a large number of outliers (resale price >$883,000).\",\n                               theme = theme(\n                                 plot.title = element_text(size = 18),\n                                 plot.subtitle = element_text(size = 12)))\n\n\n\n\n\nThe histogram suggests that resale prices may not be normally distributed. We can confirm this by performing a normality assumption test with the following null hypothesis:\nH0: Resale prices in 2022 are normally distributed\n\nad.test(hdb_2022$resale_price)\n\n\n    Anderson-Darling normality test\n\ndata:  hdb_2022$resale_price\nA = 328.27, p-value < 2.2e-16\n\n\nThe results of the Anderson-Darling normality test above suggests sufficient statistical evidence to reject the null hypothesis at 95% confidence level.\n\nGiven that resale prices do not conform to a normal distribution, we will need to use non-parametric statistical analysis methods. It would also be inappropriate to use graphs such as funnel plots which require normality assumption.\nIn addition, given the large number of outliers since in the boxplot above, it would be more appropriate to use the median (instead of mean) in this piece of analysis."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#differences-in-resale-prices-between-regions-and-towns",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#differences-in-resale-prices-between-regions-and-towns",
    "title": "Take Home Exercise 3",
    "section": "Differences in Resale Prices between Regions and Towns",
    "text": "Differences in Resale Prices between Regions and Towns\nTo uncover salient patterns of resale prices, we will take a look at how the resale prices compare across regions using Krusal-Wallis ANOVA test done at 95% confidence interval with the following null hypothesis:\nH0: There is no difference in the median resale price across regions\n\n\nShow code\n#plotting violin plot across regions\nggbetweenstats(data = hdb_2022, x = region, y = resale_price,\n               xlab = \"Region\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"Comparison of Median Resale Price across Regions\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  scale_y_continuous(limits = c(0, 1500000))\n\n\n\n\n\nAs the p-value is less than the critical value of 0.05 across all pairs, there is enough statistical evidence for us to reject the null hypothesis. As such, we can conclude that there is a difference in median resale price across regions.\n\nThe price is highest in the Central region and lowest in the North.\n\nNext, we will look into whether there is a difference in median resale price between towns within each region. Again using Krusal-Wallis ANOVA test done at 95% confidence interval, we will test the following null hypothesis:\nH0: There is no difference in the median resale price across towns in each region\n\n\nShow code\n#plotting violin plot by towns for each region\nn <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North\"), x = town, y = resale_price,\n               xlab = \"Town\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nne <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North-East\"), x = town, y = resale_price,\n               xlab = \"Town\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North-East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\ne <- ggbetweenstats(data = hdb_2022 |> filter(region == \"East\"), x = town, y = resale_price,\n               xlab = \"Town\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nw <- ggbetweenstats(data = hdb_2022 |> filter(region == \"West\"), x = town, y = resale_price,\n               xlab = \"Town\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"West\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nc <- ggbetweenstats(data = hdb_2022 |> filter(region == \"Central\"), x = town, y = resale_price,\n               xlab = \"Town\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"Central\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  scale_y_continuous(limits = c(0, 2500000))\n\n#combining plots\ncombine_plots(\n  list(n, ne, e, w, c),\n  plotgrid.args = list(nrow = 5),\n  annotation.args = list(\n    title = \"Comparison of Median Resale Price by Town\",\n    subtitle = \"\",\n    theme = theme(\n      plot.subtitle = element_text(size = 12),\n      plot.title = element_text(size = 18))))\n\n\n\n\n\n\nIn the North, North-East and East Regions, the p-value is lower than the critical value of 0.05. Since there is enough statistical evidence for us to reject the null hypothesis, we can conclude that there is a difference in median resale price across towns in these regions.\nIn the West Region, the p-value is less than the critical value of 0.05 for most pairs except Bukit-Batok-Jurong West and Choa Chu Kang-Clementi. There is sufficient statistical evidence for us to reject the null hypothesis for most pairs. Hence, we can conclude that there is a difference in median resale price across most towns in these regions except between (1) Bukit-Batok and Jurong West, and (2) Choa Chu Kang and Clementi.\nIn the Central Region, as the p-value is lower than the critical value of 0.05 for all pairs involving Geylang, there is sufficient statistical evidence for us to reject the null hypothesis and conclude that the median resale price of Geylang is lower vs. other towns in the Central region.\nA similar observation can be made for Toa Payoh where the p-value is less than the critical value of 0.05 for all pairs involving Toa Payoh except Marine Parade. Hence, there is sufficient statistical evidence for us to reject the null hypothesis and conclude that the median resale price of Toa Payoh is different vs. other towns in the Central region (except Marine Parade).\n\nHowever, the above plots focus on a point estimate i.e. the median resale price, which could lead readers to misinterpret it as a precise representation of the true value. As such, there is value in also visualising the uncertainties (such as the standard error, confidence interval, or credible interval) surrounding the point estimate in question.\n\n\nShow code\n#plotting error bar on dot plot across regions and towns\nn_uncertain <- ggplot(data = hdb_2022 |> filter(region == \"North\"), \n                      aes(x = town, y = resale_price)) +\n  stat_pointinterval(point_interval = \"median_qi\",\n                     .width = c(0.95,0.99),\n                     point_color = \"lightpink4\") +\n  labs(title = \"North\", x = \"Town\", y = \"Resale Price (SGD)\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nne_uncertain <- ggplot(data = hdb_2022 |> filter(region == \"North-East\"), \n                      aes(x = town, y = resale_price)) +\n  stat_pointinterval(point_interval = \"median_qi\",\n                     .width = c(0.95,0.99),\n                     point_color = \"lightpink4\") +\n  labs(title = \"North-East\", x = \"Town\", y = \"\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1),\n        axis.text.y = element_blank(), axis.ticks.y = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\ne_uncertain <- ggplot(data = hdb_2022 |> filter(region == \"East\"), \n                      aes(x = town, y = resale_price)) +\n  stat_pointinterval(point_interval = \"median_qi\",\n                     .width = c(0.95,0.99),\n                     point_color = \"lightpink4\") +\n  labs(title = \"East\", x = \"Town\", y = \"\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1),\n        axis.text.y = element_blank(), axis.ticks.y = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nw_uncertain <- ggplot(data = hdb_2022 |> filter(region == \"West\"), \n                      aes(x = town, y = resale_price)) +\n  stat_pointinterval(point_interval = \"median_qi\",\n                     .width = c(0.95,0.99),\n                     point_color = \"lightpink4\") +\n  labs(title = \"West\", x = \"Town\", y = \"Resale Price (SGD)\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nc_uncertain <- ggplot(data = hdb_2022 |> filter(region == \"Central\"), \n                      aes(x = town, y = resale_price)) +\n  stat_pointinterval(point_interval = \"median_qi\",\n                     .width = c(0.95,0.99),\n                     point_color = \"lightpink4\") +\n  labs(title = \"Central\", x = \"Town\", y = \"\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1),\n        axis.text.y = element_blank(), axis.ticks.y = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\n#combining plots\np_uncertain <- (n_uncertain + ne_uncertain + e_uncertain) / (w_uncertain + c_uncertain)\n\np_uncertain + plot_annotation(title = \"Visualising Confidence Intervals of Median Resale Price\", \n                               subtitle = \"Confidence Intervals between 95% and 99%\",\n                               theme = theme(\n                                 plot.title = element_text(size = 18),\n                                 plot.subtitle = element_text(size = 12)))\n\n\n\n\n\n\nIn general, towns in the North and East regions have lower uncertainties while towns in the Central have the highest uncertainties. This suggests large presence of outliers in the Central Region or more varied flat types or models, while the reverse is true for flats in the North and East regions.\nNotably, Ang Mo Kio (in the North-East) and Clementi (in the West) have a level of uncertainty that is similar to towns in the Central region."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#flat-type-vs.-resale-price",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#flat-type-vs.-resale-price",
    "title": "Take Home Exercise 3",
    "section": "Flat Type vs. Resale Price",
    "text": "Flat Type vs. Resale Price\nThe first factor that we could look into would be the association between flat type within each region and resale price using the Krusal-Wallis ANOVA test done at 95% confidence interval with the following null hypothesis:\nH0: There is no association between resale price and flat type\n\n\nShow code\n#plotting correlation between resale price and flat type across regions\nn_flat <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North\"), \n                         x = flat_type, y = resale_price,\n               xlab = \"Flat Type\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nne_flat <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North-East\"), \n                         x = flat_type, y = resale_price,\n               xlab = \"Flat Type\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North-East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\ne_flat <- ggbetweenstats(data = hdb_2022 |> filter(region == \"East\"), \n                         x = flat_type, y = resale_price,\n               xlab = \"Flat Type\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nw_flat <- ggbetweenstats(data = hdb_2022 |> filter(region == \"West\"), \n                         x = flat_type, y = resale_price,\n               xlab = \"Flat Type\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"West\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nc_flat <- ggbetweenstats(data = hdb_2022 |> filter(region == \"Central\"), \n                         x = flat_type, y = resale_price,\n               xlab = \"Flat Type\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"Central\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\n#combining plots\np_flat <- (n_flat + ne_flat + e_flat) / (w_flat + c_flat + plot_spacer())\n\np_flat + plot_annotation(title = \"Association between Resale Price vs Flat Type\", \n                           subtitle = \"Resale prices increase significantly from 3 Room to 4 Room to 5 Room flats\",\n                           theme = theme(\n                             plot.title = element_text(size = 18),\n                             plot.subtitle = element_text(size = 12)))\n\n\n\n\n\nAs p-value is less than the critical value of 0.05 across all pairs in all regions, there is enough statistical evidence for us to reject the null hypothesis. As such, we can conclude that an association exists between flat type and remaining lease.\n\nResale prices increase significantly from 3 Room to 4 Room to 5 Room flats."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#floor-area-vs.-resale-price",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#floor-area-vs.-resale-price",
    "title": "Take Home Exercise 3",
    "section": "Floor Area vs. Resale Price",
    "text": "Floor Area vs. Resale Price\nThe next factor to look into would be the relationship between resale price and floor area. We will use the non-parametric Spearman rank-based correlation analysis instead of Pearson correlation since the data is not normally distributed.\n\n\nShow code\n#plotting correlation between resale price and floor area across regions\nn_correl <- ggscatterstats(data = hdb_2022 |> filter(region == \"North\"), \n                           x = resale_price, y = floor_area_sqm,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"North\", \n       x = \"Resale Price (SGD)\", y = \"Floor Area (sqm)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(50, 160))\n\nne_correl <- ggscatterstats(data = hdb_2022 |> filter(region == \"North-East\"), \n                           x = resale_price, y = floor_area_sqm,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"North-East\", \n       x = \"Resale Price (SGD)\", y = \"Floor Area (sqm)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(50, 160))\n\ne_correl <- ggscatterstats(data = hdb_2022 |> filter(region == \"East\"), \n                           x = resale_price, y = floor_area_sqm,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"East\", \n       x = \"Resale Price (SGD)\", y = \"Floor Area (sqm)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(50, 160))\n\nw_correl <- ggscatterstats(data = hdb_2022 |> filter(region == \"West\"), \n                           x = resale_price, y = floor_area_sqm,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"West\", \n       x = \"Resale Price (SGD)\", y = \"Floor Area (sqm)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(50, 160))\n\nc_correl <- ggscatterstats(data = hdb_2022 |> filter(region == \"Central\"), \n                           x = resale_price, y = floor_area_sqm,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"Central\", \n       x = \"Resale Price (SGD)\", y = \"Floor Area (sqm)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(50, 160))\n\n#combining plots\np_correl <- (n_correl + ne_correl + e_correl) / (w_correl + c_correl + plot_spacer())\n\np_correl + plot_annotation(title = \"Correlation between Resale Price vs. Floor Area\", \n                           subtitle = \"Moderately-high to High correlation between resale price and floor area in all regions\",\n                           theme = theme(\n                             plot.title = element_text(size = 18),\n                             plot.subtitle = element_text(size = 12)))\n\n\n\n\n\n\nThe Spearman correlation coefficient for the North, East and Central regions are greater than 0.7, suggesting high positive correlation between resale price and floor area.\nIn the North-East and West regions, the Spearman correlation coefficient is 0.7 and 0.67 respectively, suggesting moderately-high positive correlation."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#remaining-lease-vs.-resale-price",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#remaining-lease-vs.-resale-price",
    "title": "Take Home Exercise 3",
    "section": "Remaining Lease vs. Resale Price",
    "text": "Remaining Lease vs. Resale Price\nAnother factor to look into would be the remaining lease and how it impacts the resale price. Again, we will use Spearman rank-based correlation analysis instead of Pearson since the data is not normally distributed.\n\n\nShow code\n#plotting correlation between resale price and remaining lease across regions\nn_lease <- ggscatterstats(data = hdb_2022 |> filter(region == \"North\"), \n                           x = resale_price, y = remaining_lease,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"North\", \n       x = \"Resale Price (SGD)\", y = \"Remaining Lease (years)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(40, 100))\n\nne_lease <- ggscatterstats(data = hdb_2022 |> filter(region == \"North-East\"), \n                           x = resale_price, y = remaining_lease,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"North-East\", \n       x = \"Resale Price (SGD)\", y = \"Remaining Lease (years)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(40, 100))\n\ne_lease <- ggscatterstats(data = hdb_2022 |> filter(region == \"East\"), \n                           x = resale_price, y = remaining_lease,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"East\", \n       x = \"Resale Price (SGD)\", y = \"Remaining Lease (years)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(40, 100))\n\nw_lease <- ggscatterstats(data = hdb_2022 |> filter(region == \"West\"), \n                           x = resale_price, y = remaining_lease,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"West\", \n       x = \"Resale Price (SGD)\", y = \"Remaining Lease (years)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(40, 100))\n\nc_lease <- ggscatterstats(data = hdb_2022 |> filter(region == \"Central\"), \n                           x = resale_price, y = remaining_lease,\n                           type = \"nonparametric\") + \n  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1)) +\n  labs(title = \"Central\", \n       x = \"Resale Price (SGD)\", y = \"Remaining Lease (years)\") +\n  scale_x_continuous(limits = c(0, 1500000)) +\n  scale_y_continuous(limits = c(40, 100))\n\n#combining plots\np_lease <- (n_lease + ne_lease + e_lease) / (w_lease + c_lease + plot_spacer())\n\np_lease + plot_annotation(title = \"Correlation between Resale Price vs. Remaining Lease\", \n                           subtitle = \"Moderate to High correlation between resale price and remaining lease across regions\",\n                           theme = theme(\n                             plot.title = element_text(size = 18),\n                             plot.subtitle = element_text(size = 12)))\n\n\n\n\n\n\nThe Spearman correlation coefficient for the Central region is greater than 0.7, suggesting there is also high positive correlation between resale price and remaining lease in this region.\nHowever, in other regions, the Spearman correlation coefficient is between 0.5 to 0.62, suggesting a moderate positive correlation between resale price and remaining lease."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#floor-level-vs.-resale-price",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#floor-level-vs.-resale-price",
    "title": "Take Home Exercise 3",
    "section": "Floor Level vs. Resale Price",
    "text": "Floor Level vs. Resale Price\nWe will also look into the association between floor level of property within each region and resale price using the Krusal-Wallis ANOVA test done at 95% confidence interval with the following null hypothesis:\nH0: There is no association between resale price and floor level\n\n\nShow code\n#plotting correlation between resale price and flat type across regions\nn_floor <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North\"), \n                         x = storey_recoded, y = resale_price,\n               xlab = \"Floor Level\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nne_floor <- ggbetweenstats(data = hdb_2022 |> filter(region == \"North-East\"), \n                         x = storey_recoded, y = resale_price,\n               xlab = \"Floor Level\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"North-East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\ne_floor <- ggbetweenstats(data = hdb_2022 |> filter(region == \"East\"), \n                         x = storey_recoded, y = resale_price,\n               xlab = \"Floor Level\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"East\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nw_floor <- ggbetweenstats(data = hdb_2022 |> filter(region == \"West\"), \n                         x = storey_recoded, y = resale_price,\n               xlab = \"Floor Level\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"West\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\nc_floor <- ggbetweenstats(data = hdb_2022 |> filter(region == \"Central\"), \n                         x = storey_recoded, y = resale_price,\n               xlab = \"Floor Level\", ylab = \"Resale Price (SGD)\",\n               type = \"np\", pairwise.comparisons = T, pairwise.display = \"ns\", \n               mean.ci = T, p.adjust.method = \"fdr\",  conf.level = 0.95,\n               title = \"Central\",\n               package = \"ggthemes\", palette = \"Tableau_10\") +\n  theme(axis.title.x = element_blank()) +\n  scale_y_continuous(limits = c(0, 1500000))\n\n#combining plots\np_floor <- (n_floor + ne_floor + e_floor) / (w_floor + c_floor + plot_spacer())\n\np_floor + plot_annotation(title = \"Association between Resale Price vs. Floor Level\", \n                           subtitle = \"Except in the North region, resale prices increase significantly with the floor level\",\n                           theme = theme(\n                             plot.title = element_text(size = 18),\n                             plot.subtitle = element_text(size = 12)))\n\n\n\n\n\nWith the exception of the North region, as p-value is less than the critical value of 0.05 across all pairs, there is enough statistical evidence for us to reject the null hypothesis and conclude that an association exists between floor level and remaining lease.\nIn the North region, as p-value is greater than the critical value of 0.05 across all pairs, there is insufficient statistical evidence for us to reject the null hypothesis.\n\nWith the exception of the North region, resale prices increase significantly as floor level increases."
  },
  {
    "objectID": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#median-resale-price-over-time",
    "href": "Take_home_ex/Take_home_ex03/Take_home_ex03.html#median-resale-price-over-time",
    "title": "Take Home Exercise 3",
    "section": "Median Resale Price over Time",
    "text": "Median Resale Price over Time\nLastly, we will plot an animated graph to observe how the median resale price in each town has changed over the course of the year.\n\n\nShow code\nhdb_stats <- hdb_2022 %>%\n  group_by(town, month) %>%\n  mutate(transaction_n = n()) %>%\n  mutate(median_price = median(resale_price)) %>%\n  select(town, region, transaction_n, median_price, month) %>%\n  distinct() %>%\n  arrange(town)\n\nggplot(hdb_stats, aes(x = town, y = median_price, \n                      size = transaction_n, \n                      colour = region)) +\n  geom_point(alpha = 0.7, show.legend = T) +\n  scale_size(range = c(2, 12)) +\n  labs(title = \"Median Resale Price by Town over time (2022)\",\n       subtitle = \"Month: 2022-{as.integer(frame_time)}\", \n       x = \"Town\", y = \"Resale Price (SGD)\",\n       size = \"No. of Transactions\", colour = \"Region\") +\n  transition_time(month) +\n  ease_aes('linear') + \n  theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5),\n        title = element_text(size = 18)) + \n  scale_y_continuous(limits = c(250000,1000000))\n\n\n\n\n\n\nWith the exception of towns in the Central Region, the median resale price in most towns generally remains relatively constant or increases at a very slow rate over the months.\nThe drastic fluctuations observed in Bukit Timah and Central Area are likely due to the very small number of transactions in these towns.\nClementi and Marine Parade are two other towns which also appear to have relatively large fluctuations over the months.\n\nFor future work, transactions over a longer period of time (e.g. 4-5 years) can be studied to investigate if seasonality affects resale prices."
  }
]